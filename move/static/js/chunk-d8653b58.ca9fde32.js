(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d8653b58"],{"0492":function(t,e,a){},"205d":function(t,e,a){"use strict";var s=a("ff2d");a.n(s).a},"2a43":function(t,e,a){"use strict";var s={name:"Card",props:{title:{type:String,default:"商品链接"},extra:{type:String}}},i=(a("4547"),a("0c7c")),n=Object(i.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("a-card",{attrs:{title:this.title}},[this.extra?e("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[this._v(this._s(this.extra))]):this._e(),this._t("default")],2)}),[],!1,null,"7b1542b2",null);e.a=n.exports},"34c9":function(t,e,a){},"3f9b":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"e",(function(){return l}));a("a15b"),a("d81d"),a("ac1f"),a("1276");var s=a("4360");function i(t){var e=document.createElement("input");e.setAttribute("id","cp_hgz_input"),e.value=t,document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("cp_hgz_input").select(),document.execCommand("copy"),document.getElementById("cp_hgz_input").remove()}function n(t){return s.a.state.account.prop_ids[t]}function o(t){if(t){var e=s.a.state.account.prop_ids;return t.split(",").map((function(t){return e[t]})).join(" ")}}function r(t){switch(t){case 1:return"在售中";case 2:return"已下架";case 3:return"已删除"}}function c(t){switch(t){case 1:return"抖音";case 2:return"拼多多";case 3:return"快手"}}function l(t){switch(t){case"taobao":return"淘宝";case"tmall":return"天猫";case"alibaba":return"1688";case"vvic":return"搜款网";case"zwd17":return"一起做网店";case"xz571":return"四季星座";case"wsy":return"网商园"}}},"436ff":function(t,e,a){},4547:function(t,e,a){"use strict";var s=a("b95b");a.n(s).a},"487a":function(t,e,a){},"4c73":function(t,e,a){"use strict";var s=a("34c9");a.n(s).a},5376:function(t,e,a){"use strict";a.r(e);a("a623"),a("4de4"),a("4160"),a("d81d"),a("45fc"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("96cf");var s=a("1da1"),i=a("2909"),n=a("5530"),o=a("2a43"),r=a("83ad"),c=(a("a9e3"),a("5880")),l=a("3f9b"),u=[{title:"商品规格信息",key:"pic",scopedSlots:{customRender:"pic"}},{title:"售卖价",key:"discount_price",scopedSlots:{customRender:"discount_price"},width:200},{title:"总库存",key:"stock",scopedSlots:{customRender:"stock"},width:200}],d={data:function(){return{columns:u,data:{},list:[],form:this.$form.createForm(this,{name:"coordinated"}),price:[],stock:[],okRole:[],title:"",changeInfoPropId:l.a}},props:{value:{type:[Number,String]}},computed:Object(n.a)({},Object(c.mapState)("account",["goodsList"])),mounted:function(){this.start()},methods:Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList"])),{},{priceRole:function(t){/^[1-9]\d*$/.test(t);this.okRole[t]=!/^[1-9]\d*$/.test(t)},start:function(){this.data=this.goodsList[this.value],this.list=this.data.sku},save:function(){this.okRole.every((function(t){return!1===t}));var t=this.$store.state.account.goodsList;t[this.value]=this.data,this.setGoodsList(t),this.start(),this.$message.success("修改成功!")}}),watch:{goodsList:{handler:function(t){this.start()},deep:!0}}},p=(a("ff37"),a("0c7c")),m=Object(p.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-info"},[a("div",{staticClass:"p-info-set"}),a("div",{staticClass:"p-info-table"},[a("a-table",{attrs:{columns:t.columns,"data-source":t.list,bordered:"",pagination:!1,rowKey:function(t,e){return e}},scopedSlots:t._u([{key:"pic",fn:function(e){return a("div",{staticClass:"g-data-info"},[a("img",{attrs:{width:"63",height:"63",src:e.pic,alt:"无图"},on:{error:function(t){e.pic="https://ypzj-oss.oss-cn-zhangjiakou.aliyuncs.com/jifengou/2021030810834RjtpAaRwCw7EBi6fakkZ.jpg"}}}),a("div",{staticClass:"g-data-text"},[a("div",[t._v("商品规格： "+t._s(t.changeInfoPropId(e.prop_ids)))])])])}},{key:"discount_price",fn:function(e,s,i){return a("div",{staticClass:"g-data-price"},[a("a-input",{class:{"rule-active-input":t.okRole[t.list[i].discount_price]},attrs:{type:"number"},on:{input:function(e){return t.priceRole(t.list[i].discount_price)}},model:{value:t.list[i].discount_price,callback:function(e){t.$set(t.list[i],"discount_price",e)},expression:"list[index]['discount_price']"}}),t.okRole[t.list[i].discount_price]?a("span",{class:{"rule-active-text":t.okRole[t.list[i].discount_price]}},[t._v("售卖价须大于0")]):t._e()],1)}},{key:"stock",fn:function(e,s,i){return a("div",{},[a("a-input",{class:{"rule-active-input":t.okRole[t.list[i].stock]},attrs:{type:"number"},on:{input:function(e){return t.priceRole(t.list[i].stock)}},model:{value:t.list[i].stock,callback:function(e){t.$set(t.list[i],"stock",e)},expression:"list[index]['stock']"}}),t.okRole[t.list[i].stock]?a("span",{class:{"rule-active-text":t.okRole[t.list[i].stock]}},[t._v(" 库存须大于0 ")]):t._e()],1)}}])}),a("div",{staticClass:"flexCenter"},[a("a-button",{staticClass:"goods-button",attrs:{type:"primary"},on:{click:t.save}},[t._v(" 保存修改结果 ")])],1)],1)])}),[],!1,null,"756e9bdc",null).exports,f=(a("caad"),a("a434"),a("ac1f"),a("2532"),a("1276"),a("99af"),a("ee7d")),v=a("cebe"),h=a.n(v);var b={data:function(){return{loading:!1,previewVisible:!1,upList:null}},model:{prop:"imageUrl",event:"change"},props:{imageUrl:{type:String,default:""}},methods:{getImg:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;e||this.$message.error("You can only upload JPG file!");var a=t.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),this.upList=t,e&&a},upImg:function(){var t=this;Object(f.a)({dir:"test"}).then((function(e){var a=e.data.data,s=a.host,i=a.accessid,n=a.policy,o=a.signature,r=a.dir,c=new FormData;c.append("OSSAccessKeyId",i),c.append("key","".concat(r).concat(t.upList.name)),c.append("policy",n),c.append("signature",o),c.append("name",t.upList.name),c.append("success_action_status","200"),c.append("file",t.upList),h()({url:s,header:{"Content-Type":"multipart/form-data"},method:"post",data:c}).then((function(e){t.$emit("change","".concat(s,"/").concat(r).concat(t.upList.name))}))}))},delImg:function(){this.$emit("change","")},handleCancel:function(){this.previewVisible=!1}}},g=(a("f0c9"),{data:function(){return{delList:[],labelCol:{span:3},wrapperCol:{span:18},data:{},size:[],color:[],list:[],changePropId:l.b}},components:{SizeImg:Object(p.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sizeImg"},[""===t.imageUrl?a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,"before-upload":t.getImg,customRequest:t.upImg}},[""===t.imageUrl?a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}})],1):t._e()]):t._e(),t.imageUrl?a("div",{staticClass:"sizeImg"},[a("img",{staticClass:"avatar-uploader",attrs:{src:t.imageUrl},on:{click:function(e){t.previewVisible=!0}}})]):t._e(),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.imageUrl}})])],1)}),[],!1,null,"d28b3e26",null).exports},props:{value:{type:[Number,String]}},mounted:function(){this.start()},methods:Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList","setProp_ids"])),{},{start:function(){this.delList=[],this.data=this.$store.state.account.goodsList[this.value],this.list=this.data.spec},save:function(){var t=this.data.prop_ids,e=this.data.sku,a=[];this.list.map((function(e){e.list.map((function(e){a.push(e.prop_id),e.value&&(t[e.prop_id]=e.value,delete e.value)}))})),this.data.prop_ids=t,this.data.sku=this.newSku(e);var s=this.$store.state.account.goodsList;s[this.value]=this.data,this.setGoodsList(s),this.start(),this.$message.success("修改成功!")},delGoods:function(t,e,a,s){var i=this;this.$confirm({title:"是否确认删除规格?",content:"当前只能删除不能新增! 如误删除请刷新页面!",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){i.delList.push(s.prop_id),i.data.spec[e].list.splice(a,1)},onCancel:function(){}})},newSku:function(t){var e=this,a=[];return t.forEach((function(t){t.prop_ids.split(",").some((function(a){if(e.delList.includes(Number(a)))return t.fuck=!0,!0}))})),t.map((function(t){t.fuck||a.push(t)})),a}})}),_=(a("5dde"),Object(p.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"norm"},[a("a-form-model",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},t._l(t.list,(function(e,s){return a("a-form-model-item",{key:s,attrs:{label:e.name}},t._l(e.list,(function(i,n){return a("div",{key:n,staticClass:"n-from-input"},[a("span",[t._v(t._s(t.changePropId(i.prop_id)))]),a("a-input",{model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item1.value"}}),i.pic?a("SizeImg",{staticClass:"n-i-img",model:{value:i.pic,callback:function(e){t.$set(i,"pic",e)},expression:"item1.pic"}}):t._e(),e.list.length>1?a("a-button",{staticClass:"n-i-bt",attrs:{type:"danger",shape:"circle",icon:"close",size:"small"},on:{click:function(a){return t.delGoods(e,s,n,i)}}}):t._e()],1)})),0)})),1),a("div",{staticClass:"flexCenter"},[a("a-button",{staticClass:"goods-button",attrs:{type:"primary"},on:{click:t.save}},[t._v(" 保存修改结果 ")])],1)],1)}),[],!1,null,"ca46b710",null).exports),y={data:function(){return{labelCol:{span:3},wrapperCol:{span:18},data:{},rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"},{max:40,message:"最长不能超过40个字",trigger:"blur"}],weight:{required:!0,message:"请填写重量",trigger:"blur"},pay_type:[{required:!0,message:"请选择支付方式",trigger:"change"}]}}},props:{value:{type:[String,Number]}},mounted:function(){this.start()},methods:Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList"])),{},{start:function(){this.data=this.$store.state.account.goodsList[this.value]},save:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return t.$message.error("请按照规则填写"),!1;var a=t.$store.state.account.goodsList;a[t.value]=t.data,t.setGoodsList(a),t.start(),t.$message.success("修改成功!")}))}})},k=(a("205d"),Object(p.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-basic"},[a("a-form-model",{ref:"ruleForm",attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.rules,model:t.data}},[a("a-form-model-item",{attrs:{label:"商品标题",prop:"title"}},[a("a-input",{model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),a("a-form-model-item",{attrs:{label:"推荐语"}},[a("a-input",{model:{value:t.data.recommend_remark,callback:function(e){t.$set(t.data,"recommend_remark",e)},expression:"data.recommend_remark"}})],1),a("a-form-model-item",{attrs:{label:"商品重量",prop:"weight"}},[a("a-input",{attrs:{type:"number",suffix:"g"},model:{value:t.data.weight,callback:function(e){t.$set(t.data,"weight",e)},expression:"data.weight"}})],1),a("a-form-model-item",{attrs:{label:"支付方式",prop:"pay_type"}},[a("a-radio-group",{model:{value:t.data.pay_type,callback:function(e){t.$set(t.data,"pay_type",e)},expression:"data.pay_type"}},[a("a-radio",{staticClass:"radioStyle",attrs:{value:2}},[t._v(" 在线支付/货到付款 （个人店铺仅支持在线支付，需升级为个体和企业时才支持货到付款） ")]),a("a-radio",{staticClass:"radioStyle",attrs:{value:1}},[t._v(" 在线支付 ")]),a("a-radio",{staticClass:"radioStyle",attrs:{value:0}},[t._v(" 货到付款 ")])],1)],1)],1),a("div",{staticClass:"flexCenter"},[a("a-button",{staticClass:"goods-button",attrs:{type:"primary"},on:{click:t.save}},[t._v(" 保存修改结果 ")])],1)],1)}),[],!1,null,"b1bc0258",null).exports),C=(a("fb6a"),a("d456")),x={components:{imgUpload:C.a},data:function(){return{labelCol:{span:3},wrapperCol:{span:18},data:{}}},props:{value:{type:[String,Number]}},mounted:function(){this.start()},methods:Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList"])),{},{start:function(){this.data=this.$store.state.account.goodsList[this.value],this.data.main_pics=this.data.main_pics.slice(0,5)},save:function(){var t=this.$store.state.account.goodsList;t[this.value]=this.data,this.setGoodsList(t),this.start(),this.$message.success("修改成功!")}})},w=(a("a469"),Object(p.a)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-img"},[t._m(0),a("div",[a("a-form-model",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"商品主图"}},[a("img-upload",{attrs:{max:5},model:{value:t.data.main_pics,callback:function(e){t.$set(t.data,"main_pics",e)},expression:"data.main_pics"}})],1)],1)],1),a("div",{staticClass:"flexCenter"},[a("a-button",{staticClass:"goods-button",attrs:{type:"primary"},on:{click:t.save}},[t._v(" 保存修改结果 ")])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"p-img-tag"},[e("span",[this._v("图片要求：")]),e("div",[e("div",[this._v("1.主图至少1张图片，主图图片应包含商品正反面外包装图，若涉及活动，图片上需清晰体现活动时间，活动方式。")]),e("div",[this._v("2. 仅支持png，jpg，jpeg格式；建议上传1:1的图片，图片至少600*600，图片大小不超过1M。")])])])}],!1,null,"38cd7571",null).exports),$={components:{imgUpload:C.a},data:function(){return{data:{},labelCol:{span:3},wrapperCol:{span:18},timeList:[2,3,5,7,10,15],radioStyle:{display:"block",height:"40px",lineHeight:"40px"},rules:{presell_type:[{required:!0,message:"请选择预售方式",trigger:"change"}],delivery_delay_day:[{required:!0,message:"请选择承诺发货时间",trigger:"change"}]}}},props:{value:{type:[String,Number]}},mounted:function(){this.start()},methods:Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList"])),{},{start:function(){this.data=this.$store.state.account.goodsList[this.value]},save:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return t.$message.error("请按照规则填写"),!1;var a=t.$store.state.account.goodsList;a[t.value]=t.data,t.setGoodsList(a),t.start(),t.$message.success("修改成功!")}))}})},j=(a("4c73"),Object(p.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-serve"},[a("a-form-model",{ref:"ruleForm",attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.rules,model:t.data}},[a("a-form-model-item",{attrs:{label:"预售设置",prop:"presell_type"}},[a("a-radio-group",{model:{value:t.data.presell_type,callback:function(e){t.$set(t.data,"presell_type",e)},expression:"data.presell_type"}},[a("a-radio",{style:t.radioStyle,attrs:{value:0}},[t._v(" 非预售 ")])],1)],1),a("a-form-model-item",{attrs:{label:"承诺发货时间",prop:"delivery_delay_day"}},[a("div",[t._v(" （请严格按照承诺发货时间进行发货，超时未发货会受到相关处罚，若当前商品报名预售活 动， 用户端展示的发货时间将以预售发货时间为准） ")]),a("a-select",{staticClass:"form-input-w",model:{value:t.data.delivery_delay_day,callback:function(e){t.$set(t.data,"delivery_delay_day",e)},expression:"data.delivery_delay_day"}},t._l(t.timeList,(function(e,s){return a("a-select-option",{key:e},[t._v(" "+t._s(e)+"天 ")])})),1)],1),a("a-form-model-item",{attrs:{label:"客服电话"}},[a("a-input",{attrs:{placeholder:"仅支持录入手机号码，座机号及400-800电话"},model:{value:t.data.mobile,callback:function(e){t.$set(t.data,"mobile",e)},expression:"data.mobile"}})],1)],1),a("div",{staticClass:"flexCenter"},[a("a-button",{staticClass:"goods-button",attrs:{type:"primary"},on:{click:t.save}},[t._v(" 保存修改结果 ")])],1)],1)}),[],!1,null,"6a8fdc20",null).exports),L=(a("a15b"),{name:"richText",components:{Editors:a("156b").a},data:function(){return{data:"",text:""}},props:{value:{type:[String,Number]}},mounted:function(){this.start()},methods:Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList"])),{},{start:function(){this.data=this.$store.state.account.goodsList[this.value];var t=this.data.content.map((function(t){return'<p style="text-align: center;"><img src="'.concat(t,'" style="max-width:100%;"><br></p>')}));this.text=t.join()},save:function(){this.data.content=this.text;var t=this.$store.state.account.goodsList;t[this.value]=this.data,this.setGoodsList(t),this.start(),this.$message.success("修改成功!")}})}),O=Object(p.a)(L,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("editors",{model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)}),[],!1,null,"253d3ef6",null).exports,S={name:"tabs",components:{Card:o.a,prompt:r.a,info:m,norm:_,basic:k,mainImg:w,richText:O,serve:j},props:{value:{type:[Number,String],default:0},editText:{type:String}}},R=Object(p.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("a-tabs",{attrs:{"default-active-key":"1"}},[e("a-tab-pane",{key:"1",attrs:{tab:"商品规格信息"}},[e("info",{attrs:{value:this.value}})],1),e("a-tab-pane",{key:"2",attrs:{tab:"商品规格"}},[e("norm",{attrs:{value:this.value}})],1),e("a-tab-pane",{key:"3",attrs:{tab:"商品基本信息"}},[e("basic",{attrs:{value:this.value}})],1),e("a-tab-pane",{key:"4",attrs:{tab:"主图"}},[e("main-img",{attrs:{value:this.value}})],1),e("a-tab-pane",{key:"5",attrs:{tab:"商品详情"}},[e("rich-text",{attrs:{value:this.value}})],1),e("a-tab-pane",{key:"6",attrs:{tab:"服务与资质"}},[e("serve",{attrs:{value:this.value}})],1)],1)}),[],!1,null,"5be420d0",null).exports,I=a("c40e"),M=[{title:"ID",key:"key",scopedSlots:{customRender:"key"},align:"center"},{title:"图片",key:"pic_url",scopedSlots:{customRender:"pic_url"},align:"center"},{title:"商品信息",key:"info",scopedSlots:{customRender:"info"},align:"center",width:500},{title:"价格",key:"price",scopedSlots:{customRender:"price"},align:"center",width:200},{title:"来源",key:"origin",scopedSlots:{customRender:"origin"},align:"center"},{title:"更多设置",key:"action",scopedSlots:{customRender:"action"},align:"center",width:100}],E={name:"PostMoving",components:{Card:o.a,prompt:r.a,goodsTabs:R},data:function(){return{columns:M,data:[],maskItem:0,options:[],category:[],selectedRowKeys:[],allMove:[],origin_type:l.e,loading:!1,all:!0,current:1}},computed:Object(n.a)({},Object(c.mapState)("account",["goodsList","prop_ids"])),mounted:function(){var t=this;this.getList(),Object(I.d)({pid:0}).then((function(e){e.data.data&&(t.options=e.data.data.data.map((function(t){return{value:t.id,label:t.name,isLeaf:t.is_leaf}})))}))},methods:Object(n.a)(Object(n.a)(Object(n.a)({},Object(c.mapMutations)("account",["setGoodsList","setProp_ids"])),Object(c.mapMutations)("goods",["setList"])),{},{getList:function(){var t=this;this.loading=!0,Object(I.f)().then((function(e){e.data.data&&(t.data=e.data.data.list.filter((function(t){return!t.code})),t.setGoodsList(t.data))})).finally((function(e){t.loading=!1}))},edit:function(t){this.maskItem=t,this.setProp_ids(this.goodsList[t].prop_ids),this.$refs.maskEdit.show()},showDeleteConfirm:function(t){var e=this;this.$confirm({title:"你是否要删除该商品?",okText:"是",okType:"danger",cancelText:"否",onOk:function(){Object(I.b)(e.$qs.stringify({move_id:t})).then((function(t){e.$message.success("删除成功!"),e.getList()}))},onCancel:function(){}})},loadData:function(t){var e=this,a=t[t.length-1];a.loading=!0,Object(I.d)({pid:a.value}).then((function(t){t.data.data?(a.loading=!1,a.children=t.data.data.data.map((function(t){return{value:t.id,label:t.name,isLeaf:t.is_leaf}}))):(a.loading=!1,a.isLeaf=!0),e.options=Object(i.a)(e.options)}))},onChange:function(t,e){},allSet:function(){var t=this;this.category.length>0?this.data.forEach((function(e,a){t.$set(e,"cids",t.category)})):this.$message.warning("请选择类目")},onSelectChange:function(t,e){this.selectedRowKeys=t,this.allMove=e,this.selectedRowKeys.length>0?this.all=!1:this.all=!0},postMove:function(t){var e=this;return Object(s.a)(regeneratorRuntime.mark((function a(){var s,i,n,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.every((function(t){return t.market_price>0&&t.discount_price>0&&t.cids}))){a.next=15;break}s=0,e.loading=!0,i=function(t,a){return new Promise((function(a,i){Object(I.i)(e.$qs.stringify(t)).then((function(t){s++,a(s)})).catch((function(t){i(t)}))}))},n=regeneratorRuntime.mark((function a(s){var n,o,r,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t[s],o=n.spec.map((function(t){if(t.list[0].pic||""===t.list[0].pic){var e=t.list.map((function(t){return t.prop_id})),a=t.list.map((function(t){return t.pic}));return{name:t.name,list:e,pic:a}}var s=t.list.map((function(t){return t.prop_id}));return{name:t.name,list:s}})),r=n.sku.map((function(t){return{sku_name:t.prop_ids,stock_num:t.stock,price:t.discount_price}})),c={err_id:n.id,code_num:n.item_no,title:n.title,cid:n.cids[n.cids.length-1],market_price:n.market_price,discount_price:n.discount_price,mobile:n.mobile,pic:n.main_pics,weight:n.weight,description:n.content,recommend_remark:n.recommend_remark,delivery_delay_day:n.delivery_delay_day,presell_type:n.presell_type,pay_type:n.pay_type,origin_url:n.origin_url,origin:n.origin,prop_ids:n.prop_ids,move_id:n.move_id,spec:o,sku:r},a.next=6,i(c).then((function(t){e.$message.success("第".concat(s+1,"商品:搬家成功!"))})).catch((function(t){var a=JSON.parse(String(t).substr(7));e.data.some((function(t){if(t.id==a.err_id)return e.$set(t,"err",a.text),!0}))}));case 6:case"end":return a.stop()}}),a)})),o=0;case 7:if(!(o<t.length)){a.next=12;break}return a.delegateYield(n(o),"t0",9);case 9:o++,a.next=7;break;case 12:s===t.length?(e.loading=!1,e.getList(),t.length>0&&(e.selectedRowKeys=[],e.allMove=[])):e.loading=!1,a.next=16;break;case 15:e.$message.warning("请选择类目,售卖价需要大于0,划线价需要大于0");case 16:case"end":return a.stop()}}),a)})))()},oneMove:function(t){this.postMove([t])},upSkuPrice:function(t,e){this.data[10*(this.current-1)+e].sku.length>0&&this.data[10*(this.current-1)+e].sku.map((function(e){e.discount_price=t.target.value}))},handleTableChange:function(t,e,a){this.current=t.current}})},z=(a("83e2"),Object(p.a)(E,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PostMoving"},[a("a-breadcrumb",[a("a-breadcrumb-item",[t._v("首页")]),a("a-breadcrumb-item",[a("router-link",{attrs:{to:"/move/moving"}},[t._v("一键搬家")])],1),a("a-breadcrumb-item",[t._v("搬家页")])],1),a("div",{staticClass:"p-content"},[a("card",{attrs:{title:""}},[a("div",{staticClass:"p-c-top"},[a("label",[t._v("快捷设置抖店分类：")]),a("a-cascader",{staticClass:"p-c-select",attrs:{options:t.options,"load-data":t.loadData,placeholder:"抖店分类"},on:{change:t.onChange},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),a("a-button",{on:{click:t.allSet}},[t._v("设置")]),a("a-button",{staticClass:"p-c-bt",attrs:{disabled:t.all,type:"primary",loading:t.loading},on:{click:function(e){return t.postMove(t.allMove)}}},[t._v(" 批量搬家 ")])],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",rowKey:function(t,e){return t.move_id},"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"key",fn:function(e,s,i){return a("div",{},[t._v(" "+t._s(10*(t.current-1)+(i+1))+" ")])}},{key:"pic_url",fn:function(t){return a("div",{},[a("img",{attrs:{width:"63",height:"63",src:t.pic_url,alt:"logo"}})])}},{key:"info",fn:function(e,s,i){return a("div",{},[a("a-input",{staticClass:"mg-b-10",attrs:{"addon-before":"标题"},model:{value:t.data[10*(t.current-1)+i].title,callback:function(e){t.$set(t.data[10*(t.current-1)+i],"title",e)},expression:"data[(current - 1) * 10 + index].title"}}),a("div",{staticClass:"p-c-info mg-b-10"},[a("a-input",{staticClass:"p-c-info-1",attrs:{"addon-before":"货号"},model:{value:t.data[10*(t.current-1)+i].item_no,callback:function(e){t.$set(t.data[10*(t.current-1)+i],"item_no",e)},expression:"data[(current - 1) * 10 + index].item_no"}}),a("a-cascader",{staticClass:"p-c-info-2",attrs:{options:t.options,"load-data":t.loadData,placeholder:"抖店分类"},on:{change:t.onChange},model:{value:s.cids,callback:function(e){t.$set(s,"cids",e)},expression:"record['cids']"}})],1),a("div",{staticClass:"p-c-err"},[t._v(" "+t._s(s.err)+" ")])],1)}},{key:"price",fn:function(e,s,i){return a("div",{},[a("a-input",{staticClass:"mg-b-10",attrs:{type:"number","addon-before":"售卖价"},on:{blur:function(e){return t.upSkuPrice(e,i)}},model:{value:t.data[10*(t.current-1)+i].discount_price,callback:function(e){t.$set(t.data[10*(t.current-1)+i],"discount_price",e)},expression:"data[(current - 1) * 10 + index].discount_price"}}),a("a-input",{attrs:{type:"number","addon-before":"划线价"},model:{value:t.data[10*(t.current-1)+i].market_price,callback:function(e){t.$set(t.data[10*(t.current-1)+i],"market_price",e)},expression:"data[(current - 1) * 10 + index].market_price"}})],1)}},{key:"origin",fn:function(e){return a("div",{},[t._v(" "+t._s(t.origin_type(e.origin))+" ")])}},{key:"action",fn:function(e,s,i){return a("div",{},[a("div",{staticClass:"mg-b-10"},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.oneMove(s)}}},[t._v(" 一键搬家 ")])],1),a("div",{staticClass:"mg-b-10"},[a("a-button",{attrs:{size:"small"},on:{click:function(e){t.edit(10*(t.current-1)+i)}}},[t._v(" 编辑信息 ")])],1),a("div",[a("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.showDeleteConfirm(s.move_id)}}},[t._v(" 移除商品 ")])],1)])}}])})],1)],1),a("prompt",{ref:"maskEdit",attrs:{width:1200,button:!1,maskClosable:!1}},[a("goods-tabs",{key:t.maskItem,attrs:{value:t.maskItem}})],1)],1)}),[],!1,null,"2994dfd6",null));e.default=z.exports},"5dde":function(t,e,a){"use strict";var s=a("973b");a.n(s).a},"83ad":function(t,e,a){"use strict";a("a9e3");var s={name:"MaskMove",data:function(){return{visible:!1}},props:{title:{type:String},width:{type:[Number,String]},maskClosable:{type:Boolean,default:!0},button:{type:Boolean,default:!0}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}}},i=(a("cdaf"),a("0c7c")),n=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"mask",staticClass:"mask"},[a("a-modal",{attrs:{title:t.title,footer:null,width:t.width,maskClosable:t.maskClosable,getContainer:function(){return t.$refs.mask}},on:{ok:t.hide},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t._t("default"),t.button?a("div",{staticClass:"flexCenter"},[a("a-button",{attrs:{type:"primary"},on:{click:t.hide}},[t._v(" 确认 ")])],1):t._e()],2)],1)}),[],!1,null,"491172a8",null);e.a=n.exports},"83e2":function(t,e,a){"use strict";var s=a("f151");a.n(s).a},"95b0":function(t,e,a){},"973b":function(t,e,a){},a469:function(t,e,a){"use strict";var s=a("436ff");a.n(s).a},b95b:function(t,e,a){},cdaf:function(t,e,a){"use strict";var s=a("487a");a.n(s).a},f0c9:function(t,e,a){"use strict";var s=a("95b0");a.n(s).a},f151:function(t,e,a){},ff2d:function(t,e,a){},ff37:function(t,e,a){"use strict";var s=a("0492");a.n(s).a}}]);